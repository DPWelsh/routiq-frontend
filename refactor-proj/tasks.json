{
    "project": "Routiq Frontend - Console Error Fixes",
    "description": "Systematic resolution of all console errors preventing dashboard from loading",
    "created": "2024-06-30T12:30:00Z",
    "priority": "CRITICAL",
    "total_estimated_hours": 3.0,
    
    "error_analysis": {
      "primary_issues": [
        "404 on /api/v1/auth/verify - endpoint doesn't exist yet",
        "Organization context failing due to backend verification",
        "CSP violations from Clerk workers",
        "Missing favicon and logo assets causing 404s"
      ],
      "impact": "Complete dashboard failure - user can't access any data"
    },

    "phases": [
      {
        "id": "error_001",
        "title": "Fix Backend Auth Verification (URGENT)",
        "status": "pending",
        "priority": "critical",
        "estimated_hours": 0.5,
        "description": "Disable /api/v1/auth/verify calls since endpoint doesn't exist yet",
        "tasks": [
          {
            "id": "error_001_001",
            "title": "Disable backend verification in useOrganizationContext",
            "description": "Comment out api.verifyAuth() call again - backend response doc didn't list this endpoint as ready",
            "files": ["src/hooks/useOrganizationContext.ts"],
            "type": "code_fix",
            "estimated_minutes": 15
          },
          {
            "id": "error_001_002", 
            "title": "Add graceful fallback for missing auth endpoint",
            "description": "Use pure Clerk-based organization context until auth endpoint is implemented",
            "files": ["src/hooks/useOrganizationContext.ts"],
            "type": "code_fix",
            "estimated_minutes": 15
          }
        ]
      },

      {
        "id": "error_002",
        "title": "Fix Missing Assets (404s)",
        "status": "pending", 
        "priority": "medium",
        "estimated_hours": 0.5,
        "description": "Resolve favicon and logo 404 errors",
        "tasks": [
          {
            "id": "error_002_001",
            "title": "Create missing favicon files",
            "description": "Add favicon.ico, favicon.svg, favicon.png to public directory",
            "files": ["public/favicon.ico", "public/favicon.svg", "public/favicon.png"],
            "type": "asset_creation",
            "estimated_minutes": 15
          },
          {
            "id": "error_002_002",
            "title": "Create missing logo assets", 
            "description": "Add routiq-logo-core.svg and routiq-logomark-core.svg",
            "files": ["public/logos/routiq-logo-core.svg", "public/logos/routiq-logomark-core.svg"],
            "type": "asset_creation",
            "estimated_minutes": 15
          }
        ]
      },

      {
        "id": "error_003",
        "title": "Fix Content Security Policy Issues",
        "status": "pending",
        "priority": "medium", 
        "estimated_hours": 0.5,
        "description": "Resolve CSP violations preventing Clerk workers",
        "tasks": [
          {
            "id": "error_003_001",
            "title": "Update CSP headers for Clerk compatibility",
            "description": "Add worker-src blob: and script-src unsafe-eval for Clerk",
            "files": ["next.config.js"],
            "type": "configuration",
            "estimated_minutes": 20
          },
          {
            "id": "error_003_002",
            "title": "Configure Clerk CSP settings",
            "description": "Add proper CSP directives for Clerk workers and fonts",
            "files": ["src/lib/auth/clerk-config.ts"],
            "type": "configuration", 
            "estimated_minutes": 10
          }
        ]
      },

      {
        "id": "error_004",
        "title": "Dashboard Data Loading Fix",
        "status": "pending",
        "priority": "critical",
        "estimated_hours": 1.0,
        "description": "Ensure dashboard loads with working organization context",
        "tasks": [
          {
            "id": "error_004_001",
            "title": "Test dashboard endpoint directly",
            "description": "Verify /api/v1/dashboard/{org_id} works with manual curl test",
            "files": [],
            "type": "testing",
            "estimated_minutes": 15
          },
          {
            "id": "error_004_002",
            "title": "Add comprehensive error handling", 
            "description": "Better error messages distinguishing auth vs endpoint vs network issues",
            "files": ["src/hooks/useDashboardData.ts", "src/components/dashboard/unified-dashboard.tsx"],
            "type": "error_handling",
            "estimated_minutes": 30
          },
          {
            "id": "error_004_003",
            "title": "Add debug logging for organization flow",
            "description": "Trace organization selection -> context -> API calls flow",
            "files": ["src/hooks/useOrganizationContext.ts", "src/lib/routiq-api.ts"],
            "type": "debugging",
            "estimated_minutes": 15
          }
        ]
      },

      {
        "id": "error_005", 
        "title": "Endpoint Validation",
        "status": "pending",
        "priority": "high",
        "estimated_hours": 0.5,
        "description": "Verify which backend endpoints are actually working",
        "tasks": [
          {
            "id": "error_005_001",
            "title": "Test health endpoint",
            "description": "Verify GET /health returns 200 OK",
            "files": [],
            "type": "api_testing",
            "estimated_minutes": 5
          },
          {
            "id": "error_005_002", 
            "title": "Test dashboard endpoint with proper auth",
            "description": "Manual test of /api/v1/dashboard/org_2xwHiNrj68eaRUlX10anlXGvzX7 with JWT",
            "files": [],
            "type": "api_testing", 
            "estimated_minutes": 15
          },
          {
            "id": "error_005_003",
            "title": "Update RoutiqAPI based on working endpoints",
            "description": "Remove calls to non-existent endpoints, focus on working ones only",
            "files": ["src/lib/routiq-api.ts"],
            "type": "code_fix",
            "estimated_minutes": 10
          }
        ]
      }
    ],

    "implementation_order": [
      "error_001 (Fix auth verification - BLOCKING)", 
      "error_005 (Validate endpoints - CRITICAL)",
      "error_004 (Dashboard loading - CRITICAL)",
      "error_002 (Missing assets - MEDIUM)",
      "error_003 (CSP issues - MEDIUM)"
    ],

    "success_criteria": [
      "✅ User can sign in and select organization without errors",
      "✅ Dashboard loads with organization context", 
      "✅ Real backend data displays (650 patients, etc.)",
      "✅ No 404 errors in console for API calls",
      "✅ No CSP violations in console",
      "✅ Sync functionality works"
    ],

    "rollback_plan": {
      "if_backend_not_ready": "Revert to static mock data with clear backend status message",
      "if_auth_issues": "Fall back to Clerk-only organization management",
      "if_csp_problems": "Disable problematic Clerk features temporarily"
    },

    "notes": [
      "Backend response doc shows dashboard/patients/sync endpoints ready but NOT auth/verify",
      "Organization context is the blocking issue - once fixed, dashboard should work",
      "CSP and asset 404s are cosmetic but should be fixed for production",
      "Focus on getting basic dashboard working first, then polish"
    ]
  }